<?php	// GroControl.php 	// version 1.0 (Jan, 5th. 2013)	// created by chenzhao for web2.0 project		// reconstructed by kylejan	// Jan, 5th. 2013	require_once( ROOT."database/Group.php" );	require_once( ROOT."database/Config.php" );		// add a group	// return the error message( type: boolean )	// meanwhile, the group->gid will be changed.	function AddGroup($group){		$con = mysql_connect(Config::$host, Config::$user, Config::$pass) or die(Config::$err1);		mysql_select_db(Config::$db, $con) or die(Config::$err2);		mysql_query('SET NAMES UTF8') or die(Config::$err3);			//insert into database		$values = "('" . $group->gid . "','" . $group->uid . "','" . $group->name . "','" . $group->setime . "','" . $group->des . "','" . $group->personNum . "','" . $group->pic . "')";		$sql_insert = "insert into `group`( gid, uid, name, setime, description, personNum, pic ) value" . $values;		$result = mysql_query($sql_insert, $con);// or die( mysql_error() );		//get id of the last insertion operation 		$group->gid = mysql_insert_id();		mysql_close();				return $result; 	}		function FindGroup($gid){		$con = mysql_connect(Config::$host, Config::$user, Config::$pass) or die(Config::$err1);		mysql_select_db(Config::$db, $con) or die(Config::$err2);		mysql_query('SET NAMES UTF8') or die(Config::$err3);				$sql = "select * from `group` where gid = " . $gid;		$result = mysql_query($sql) or die("No group table!");		mysql_close();				// check existence		if( mysql_num_rows( $result ) != 1 )			return false;					$gro = new Group();		$gro->gid = mysql_result( $result, 0, "gid");		$gro->uid = mysql_result( $result, 0, "uid");		$gro->name = mysql_result( $result, 0, "name");		$gro->setime = mysql_result( $result, 0, "setime");		$gro->des = mysql_result( $result, 0, "description");		$gro->personNum = mysql_result( $result, 0, "personNum");		$gro->pic = mysql_result( $result, 0, "pic");				$con = mysql_connect(Config::$host, Config::$user, Config::$pass) or die(Config::$err1);		mysql_select_db(Config::$db, $con) or die(Config::$err2);		mysql_query('SET NAMES UTF8') or die(Config::$err3);				$sql = "select * from `crew` where gid = " . $gro->gid;		$result = mysql_query($sql) or die("No crew table!");		mysql_close();				$i = 0;		while($row = mysql_fetch_array($result)){			$gro->member[$i] = $row['uid'];			$i++;		}				return $gro;	}	function DeleteGroup($gid){		$group = FindGroup($gid);		$size = $group->personNum;				for($i=0;$i<$size;$i++){			$group->DeleteMember($group->member[$i]);		}				$con = mysql_connect(Config::$host, Config::$user, Config::$pass) or die(Config::$err1);		mysql_select_db(Config::$db, $con) or die(Config::$err2);		mysql_query('SET NAMES UTF8') or die(Config::$err3);		$sql = "delete from `group` where gid = " . $gid;		$result = mysql_query($sql) or die("No group table!");		mysql_close();		return $result;	}?>